<app-window-template [window]="windowRef">
    <ng-template #toolbar>
        <app-toolbar
            [currentTab]="currentTab"
            [(showHiddenFiles)]="showHiddenFiles"
            [(showSidebar)]="showSidebar"
            [(sortOrder)]="sortOrder"
        />
    </ng-template>
    <ng-template #content>
        <as-split direction="horizontal" [gutterSize]="1">
            <as-split-area [size]="20">
                <div class="sidebar" *ngIf="showSidebar" (click)="currentTab.selection = []">
                    <ul>
                        <li>Recent</li>
                        <li>Starred</li>
                        <li>Home</li>
                        <li #li (hover)="li['hover']=true" (mouseout)="li['hover']=false">
                            Desktop
                            <!-- <div class="tooltip" [class.visible]="li['hover']">/home/knackstedt/Downloads</div> -->
                        </li>
                        <li>Documents</li>
                        <li>Downloads</li>
                        <li>Music</li>
                        <li>Pcitures</li>
                        <li>Videos</li>
                        <li>Trash</li>
                    </ul>
                    <ul>
                        <li>mounted f:/</li>
                        <li>mounted disk</li>
                    </ul>
                    <ul>
                        <li>data on ftp</li>
                        <li>data on smb</li>
                    </ul>
                    <ul>
                        <li>+ other locations</li>
                    </ul>
                </div>
            </as-split-area>
            <as-split-area [size]="80" style="background-color: #272727;">
                <div class="content"
                    [class.active]="windowRef._isActive"
                    [style.--tab-height]="tabs.length > 1 ? '36px' : '0'"
                >
                    <mat-tab-group (selectedTabChange)="currentTab = tabs[$event.index]">
                        <mat-tab *ngFor="let tab of tabs">
                            <ng-template mat-tab-label>
                                {{tab.label}}
                                <mat-icon
                                    class="close"
                                    (click)="closeTab(tab)">
                                    close
                                </mat-icon>
                            </ng-template>

                            <ng-template matTabContent>
                                <app-file-grid
                                    [window]="windowRef"
                                    [(path)]="tab.path"
                                    (pathChange)="tabPathChange(tab)"
                                    [(selection)]="tab.selection"
                                    (fileOpen)="onFileOpen($event)"
                                    [viewMode]="tab.viewMode"
                                />
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </as-split-area>
        </as-split>
    </ng-template>
</app-window-template>
